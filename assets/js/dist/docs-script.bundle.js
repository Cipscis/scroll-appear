(()=>{"use strict";const e=function(e,t){let s=null,i=null;return function(...n){s?(i&&clearTimeout(i),i=setTimeout((()=>{e.apply(this,n),i=null}),t)):(e.apply(this,n),s=setTimeout((()=>{s=null}),t))}};let t=!1;try{const e={get passive(){return t=!0,!1}},s=()=>{};window.addEventListener("test",s,e),window.removeEventListener("test",s)}catch(e){t=!1}const s=t,i=".js-scroll-appear",n="data-scroll-appear-state";var o;!function(e){e.UNINITIALISED="uninitialised",e.HIDDEN="hidden",e.APPEARING="appearing",e.VISIBLE="visible"}(o||(o={}));class a{#e;#t;#s;#i;constructor(){this.#e=[],this.#t=null,this.#s=null,this.#i=0}push(e){this.#n(e)||e.getState()===o.HIDDEN&&(this.#e.push(e),this.#o())}catchUp(){for(let e=0;e<this.#e.length;e++){const t=this.#e[e];!1===t.isInViewport()&&(0===e?this.#a():(this.#e.splice(e,1),t.appear()),e-=1)}}#n(e){return this.#e.includes(e)}#o(){0!==this.#e.length?null===this.#t&&(this.#t=setTimeout((()=>this.#a()),this.#i)):this.#s=setTimeout((()=>{this.#i=0,this.#s=null}),this.#i)}#a(){this.#s&&(clearTimeout(this.#s),this.#s=null),this.#t&&clearTimeout(this.#t),this.#t=null;let e=this.#e.shift();for(;e?.getState()===o.VISIBLE;)e=this.#e.shift();e&&(e.appear(),this.#i=e.delay,this.#o())}}const l=new Map,r=new a;function u(e=document){const t=l.get(e)||new a;return!1===l.has(e)&&l.set(e,t),t}function c(){const e=[];for(const t of l.values())e.push(t);return e}l.set(document,r);const m=new Map;function h(e){const t=m.get(e);return t||new d(e)}class d{#l;constructor(e){if(m.has(e))throw new Error("Cannot create a second `ScrollAppearItem` for the same `Element`");m.set(e,this),this.#l=e,this.getState()===o.UNINITIALISED&&this.#r(o.HIDDEN),this.#l.addEventListener("focusin",(()=>this.appear()),{once:!0})}get delay(){return Number(this.#l.getAttribute("data-scroll-appear-delay"))||0}isInViewport(e=0){const t=window.innerHeight/2-50;e>t&&(e=t);const s=this.#l.getBoundingClientRect(),i=e,n=(window.innerHeight||document.documentElement.clientWidth)-e,o=s.bottom>=i,a=s.top<=n;return o&&a}appear(){this.getState()!==o.VISIBLE&&(matchMedia("(prefers-reduced-motion)").matches?this.#r(o.VISIBLE):(this.#r(o.APPEARING),"0s"!==getComputedStyle(this.#l).transitionDuration?this.#l.addEventListener("transitionend",(()=>this.#r(o.VISIBLE)),{once:!0}):this.#r(o.VISIBLE)))}#r(e){this.#l.setAttribute(n,e)}getState(){const e=this.#l.getAttribute(n);return t=e,Object.values(o).includes(t)?e:o.UNINITIALISED;var t}#u(){const e=this.#l.getAttribute("data-scroll-appear-queue");if(e)return u(e);const t=this.#l.closest(".js-scroll-appear__container");return t?u(t):u()}queue(){this.#u().push(this)}}new MutationObserver((function(e,t){for(const e of m.keys())!1===document.body.contains(e)&&m.delete(e)})).observe(document,{childList:!0,subtree:!0});const p=new MutationObserver((function(e,t){let s=!1;for(const t of e)if(t.addedNodes.length>0){s=!0;break}if(!0===s){const e=document.querySelectorAll(i);e.length>0&&I(e)}}));function I(e){const t=function(e){return e||(e=document.querySelectorAll(i)),Array.from(e).map(h)}(e);!function(e){e.filter((e=>e.getState()===o.HIDDEN)).filter((e=>e.isInViewport())).forEach((e=>e.queue()))}(t)}function f(e){I()}function w(){const e=c();for(const t of e)t.catchUp()}I(),function(){const t=!s||{passive:!0},i=e(f,200);window.addEventListener("scroll",i,t),window.addEventListener("resize",i,t);const n=e(w,200);window.addEventListener("scroll",n,t),window.addEventListener("resize",n,t)}(),p.observe(document,{childList:!0,subtree:!0}),window.setTimeout((()=>{const e=document.createElement("div");e.classList.add("js-scroll-appear"),e.classList.add("example"),e.setAttribute("data-scroll-appear-queue","example-queue");const t=document.querySelectorAll(".example__grid");t.length&&t[t.length-1].appendChild(e)}),2e3)})();
//# sourceMappingURL=docs-script.bundle.js.map